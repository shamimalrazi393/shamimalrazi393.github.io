<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Shamim Al Razi | BUET MME Student</title>
  <link rel="icon" href="favicon.ico" />
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #f5f7fa;
      color: #333;
    }
    header {
      background-color: #2c3e50;
      padding: 30px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }
    .logo {
      height: 80px;
    }
    .profile {
      height: 80px;
      width: 80px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #fff;
      box-shadow: 0 0 5px rgba(0,0,0,0.4);
    }
    .header-text {
      flex: 1;
      text-align: center;
      color: white;
    }
    .header-text h1 {
      margin: 10px 0 5px;
      font-size: 24px;
    }
    .header-text p {
      margin: 0;
      font-size: 16px;
    }
    nav {
      background-color: #34495e;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 25px;
      padding: 12px 0;
    }
    nav a {
      color: white;
      text-decoration: none;
      font-weight: bold;
      transition: color 0.3s;
    }
    nav a:hover {
      color: #ffd700;
    }
    section {
      padding: 40px 20px;
      max-width: 900px;
      margin: auto;
    }
    h2 {
      border-bottom: 2px solid #ccc;
      padding-bottom: 8px;
      margin-bottom: 20px;
      color: #2c3e50;
    }
    input, textarea, button {
      font-size: 16px;
      padding: 8px;
      margin: 5px 0;
    }
    button {
      background: #e74c3c;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background: #c0392b;
    }
    #youtube-videos iframe {
      margin: 10px;
    }
    footer {
      background-color: #2c3e50;
      color: white;
      text-align: center;
      padding: 30px 20px;
      font-size: 15px;
    }
  </style>
  <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/https://script.google.com/macros/s/AKfycbx97xuAGkZO1HsP4RuTBm9_PCd-7xAzlLqKPbdiE4NMj_jEKFfDvXGUpxQXjuZgcsZMsw/exec"; // Replace this

    function uploadFile(inputId) {
      const fileInput = document.getElementById(inputId);
      const file = fileInput.files[0];
      if (!file) return alert("Select a file first.");

      const reader = new FileReader();
      reader.onload = function (e) {
        const base64Data = e.target.result.split(",")[1];

        const formData = new FormData();
        formData.append("file", base64Data);
        formData.append("fileName", file.name);
        formData.append("contentType", file.type);

        fetch(SCRIPT_URL, {
          method: "POST",
          body: formData
        })
        .then((res) => res.json())
        .then((res) => {
          alert("Upload successful!");
          loadFiles();
        })
        .catch((err) => alert("Upload failed: " + err.message));
      };
      reader.readAsDataURL(file);
    }

    function loadFiles() {
      fetch(SCRIPT_URL)
        .then((res) => res.json())
        .then((files) => {
          const container = document.getElementById("download-list");
          container.innerHTML = "";
          files.forEach((f) => {
            container.innerHTML += `<p><a href="${f.downloadUrl}" target="_blank">${f.name}</a></p>`;
          });
        });
    }

    const channelId = "UCZpabp4C9ttk68-G1_SOsJQ"; // Replace
    const apiKey = "AIzaSyC0Z9fSpsm-GUipCRgG0XJTeKTvRza0pFU"; // Replace

    function fetchVideos() {
      fetch(`https://www.googleapis.com/youtube/v3/search?key=${apiKey}&channelId=${channelId}&part=snippet,id&order=date&maxResults=4`)
        .then(res => res.json())
        .then(data => {
          const videosDiv = document.getElementById('youtube-videos');
          videosDiv.innerHTML = '';
          if (!data.items) return videosDiv.textContent = 'No videos found.';
          data.items.forEach(item => {
            if (item.id.kind === "youtube#video") {
              const videoId = item.id.videoId;
              const iframe = document.createElement('iframe');
              iframe.width = "320";
              iframe.height = "180";
              iframe.src = `https://www.youtube.com/embed/${videoId}`;
              iframe.allowFullscreen = true;
              videosDiv.appendChild(iframe);
            }
          });
        });
    }

    document.addEventListener("DOMContentLoaded", () => {
      loadFiles();
      fetchVideos();
    });
  </script>
</head>
<body>
  <header>
    <img src="buet-logo.png" alt="BUET Logo" class="logo" />
    <div class="header-text">
      <h1>Md. Shamim Al Razi</h1>
      <p>Materials & Metallurgical Engineering Student | BUET</p>
    </div>
    <img src="profile.jpg" alt="Shamim Al Razi" class="profile" />
  </header>

  <nav>
    <a href="#fusion">Fusion Shilpigosti</a>
    <a href="#publications">Publications</a>
    <a href="#writings">Writings</a>
    <a href="#contact">Contact</a>
  </nav>

  <section id="fusion">
    <h2>Fusion Shilpigosti</h2>
    <p>Explore music and videos under Fusion Shilpigosti.</p>
    <a class="button" href="https://youtube.com/@fusion_393" target="_blank">Watch on YouTube</a>

    <h3>Upload Your Music or Video</h3>
    <input type="file" id="fusionUpload" accept="video/*,audio/*" />
    <button onclick="uploadFile('fusionUpload')">Upload</button>

    <h3>Public Downloads</h3>
    <div id="download-list">Loading files...</div>

    <h3>Latest YouTube Videos</h3>
    <div id="youtube-videos">Loading videos...</div>
  </section>

  <footer>
    <p>&copy; 2025 Md. Shamim Al Razi. All rights reserved.</p>
  </footer>
</body>
</html>
